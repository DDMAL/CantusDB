<!DOCTYPE html>
{% load static %}
{% load helper_tags %} {# for has_group #}
<html lang="en">

<head>
    {% if PROJECT_ENVIRONMENT == "PRODUCTION" %}
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-JXEY1VRT2W"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-JXEY1VRT2W');
        </script>
    {% endif %}
    {% if not PROJECT_ENVIRONMENT == "PRODUCTION" %}
        {# to ensure Google/etc. only indexes the main production site, and not staging #}
        <meta name="robots" content="noindex">
    {% endif %}
    <!-- Required meta tags -->
    <meta name="google-site-verification" content="EwxpNpZ_ZOQnetVVLELGn5-aD_beT3EQqUuI6glkArI" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, 
    initial-scale=1, shrink-to-fit=no">

    <link rel="icon" href="{% static "favicon.ico" %}">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

    <!-- font-awesome CSS for icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- JS, Popper.js, and jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
    <style>
        html {
            position: relative;
            min-height: 90%;
        }

        body {
            margin-bottom: 30px;
            /* Margin bottom by footer height */
            background-image: url('{% static "background.jpg" %}');
        }
        
        .container {
            /* this is relevant for the Article List page */
            overflow-wrap: break-word;
        }

        .footer {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 30px;
        }

        .footer li {
            padding: 5px 0px !important
        }

        .bg-footer {
            background-color: #CC3333;
        }

        /* Change dropdown selected background to blue */
        .dropdown .dropdown-menu .dropdown-item:active,
        .dropdown .dropdown-menu .dropdown-item:hover {
            background-color: #f6f6f6 !important;
            color: #CC3333;
        }

        hr.color {
            border-top: 1px solid lightblue !important;
        }

        .nav-link {
            color: black;
        }

        .nav-item {
            margin: 0px 10px;
        }

        .nav-item .nav-link .small {
            color: #5e5e5f;
        }

        .navbar-toggler {
            margin: 0px 10px;
        }

        .navbar-brand {
            margin: 0px 10px;
        }

        .border-top {
            border-style: solid none none;
            border-width: 5px !important;
            border-color: #CC3333 !important;
        }

        a {
            color: #922;
        }

        a:hover {
            color: #922;
            text-decoration: underline;
        }

        .footer h5 {
            margin: 25px 0px 10px
        }
        
        /* links, appearing in sidebars, preceded with guillemets ("»"s) */
        .guillemet {
            display: block
        }

        .guillemet::before {
            content: "» "
        }
        .select2 {
            width: 100%!important;
          }

        /* this class is used for displaying results under the global search bar */
        .list-group-item-action:hover {
            color: black;
            transition: background-color .25s;
            background-color: #CC3333;
        }

        @media print {
            header, footer, .search-bar, .sidebar {
                display: none;
            }
        }

        @media (min-width: 992px) { /* 992px = bootstrap large breakpoint */
            .main-content {
                margin-right: 16px;
                
            }
        }

        @media (max-width: 992px) { /* 992px = bootstrap large breakpoint */
            .main-content {
                margin-bottom: 16px;
                
            }
        }
    </style>
    <link href="{% static 'fonts/volpiano.css' %}" rel="stylesheet" media="screen">
</head>

<body>
    <header>
        <!-- Navbar -->
        <div class="container p-0">
            <nav class="navbar navbar-expand-lg navbar-light bg-white border-top col-12">
                <a class="navbar-brand" href="/?ref=navbar_logo">
                    <img src="{% static "CantusLogoSmall.gif" %}" title="Cantus Database Home" alt="Cantus Database Logo" loading="lazy">
                </a>

                <!-- Hamburger button to show nav when screen is smaller-->
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-links"
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbar-links">
                    <ul class="navbar-nav mx-auto">

                        <!-- ABOUT -->
                        <li class="nav-item dropdown text-info">
                            <a class="nav-link dropdown-toggle font-weight-bold" href="#" id="navbarDropdownMenuLink"
                                role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                ABOUT
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="/?ref=navbar_about">Home</a>
                                <a class="dropdown-item" href="{% url 'article-list' %}">News</a>
                                <a class="dropdown-item" href="{% url 'indexer-list' %}">Contributors</a>
                                <a class="dropdown-item" href="/about/id-numbers/">ID Numbers: A History and
                                    Explanation</a>
                                <a class="dropdown-item" href="/about/acknowledgements/">Acknowledgements</a>
                                <a class="dropdown-item" href="/about/faq/">FAQ</a>
                                <a class="dropdown-item" href="https://www.youtube.com/watch?v=iMmGrUxhPj4" target="_blank">Short Video
                                    Introduction (YouTube)</a>
                                <a class="dropdown-item" href="/about/principles-of-indexing/">Basic Principles of Indexing</a>
                                {% if request.user.is_authenticated %}
                                    <a class="dropdown-item" href="{% url 'items-count' %}">Items Count</a>
                                {% endif %}
                            </div>
                        </li>

                        <!-- SOURCES -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle font-weight-bold" href="#" id="navbarDropdownMenuLink"
                                role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                SOURCES
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="{% url 'source-list' %}?segment=4063">Cantus Sources</a>
                                <a class="dropdown-item" href="{% url 'source-list' %}?segment=4064">Clavis Sequentiarium (Sequence Database by Calvin
                                    Bower)</a>
                            </div>
                        </li>

                        <!-- CHANTS -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle font-weight-bold" href="#" id="navbarDropdownMenuLink"
                                role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                CHANTS
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="{% url 'chant-search' %}">Chant Search</a>
                                <a class="dropdown-item" href="{% url 'melody-search' %}">Search by melody</a>
                                <a class="dropdown-item" href="{% url 'sequence-list' %}">Clavis Sequentiarium (Sequence Database by Calvin
                                    Bower)</a>
                            </div>
                        </li>

                        <!-- FEASTS -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle font-weight-bold" href="/feasts"
                                id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false">
                                FEASTS
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="{% url 'feast-list' %}">List of all feasts</a>
                                <a class="dropdown-item" href="{% url "feast-list" %}?date=sanc">Sanctorale</a>
                                <a class="dropdown-item" href="{% url "feast-list" %}?date=temp">Temporale</a>
                            </div>
                        </li>

                        <!-- TERMS -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle font-weight-bold" href="/genres"
                                id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false">
                                TERMS
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="{% url 'genre-list' %}">Genre abbreviations</a>
                                <a class="dropdown-item" href="{% url 'office-list' %}">Office/Mass abbreviations</a>
                                <a class="dropdown-item" href="/description/">Fields</a>
                            </div>
                        </li>

                        <!-- RESOURCES -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle font-weight-bold" href="#" id="navbarDropdownMenuLink"
                                role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                RESOURCES
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <a class="dropdown-item" href="/tutorial/">Tutorial for Cantus Contributors</a>
                                <a class="dropdown-item" href="/documents/">PDF Documents for Cantus Contributors</a>
                                <a class="dropdown-item" href="/citations/">Citation Style</a>
                                <a class="dropdown-item" href="/references/">References</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <!-- <hr class="color"> -->
    </header>

    <!-- Content goes here, using the extends tag from Django -->
    <main role="main" class="content container px-0 pt-4">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer in every page -->
    <footer class="footer">
        <hr style="opacity: 0%"> <!-- hr necessary to create spacing between <main> and <footer> -->
        <div class="p-3 bg-white small">
            <div class="container">
                <div class="row">
                    <div class="col-md" id="team-info">
                        <h5>Cantus Team</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item p-0"><strong><a href="mailto:debra.lacoste@dal.ca">Debra Lacoste</a>
                                </strong>&nbsp; |&nbsp;
                                Project Manager</li>
                            <li class="list-group-item p-0"><strong><a
                                        href="http://www.dal.ca/faculty/arts/school-of-performing-arts/faculty-staff/our-faculty/musicology/jennifer-bain.html">Jennifer
                                        Bain </a> &nbsp;</strong> |&nbsp; Principal Investigator</li>
                            <li class="list-group-item p-0"><strong><a
                                href="https://ddmal.music.mcgill.ca/">Cantus Team</a> &nbsp;</strong> |&nbsp; Developers/Maintainers</li>
                            <li class="list-group-item p-0"><a href="/indexers">&nbsp;&nbsp; ⇨ List of contributors</a></li>
                        </ul>
                    </div>
                    <div class="col-md" id="license">
                        <h5>Creative Commons License</h5>
                        <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                            <img src="{% static "creative-commons-logo.png" %}" alt="Creative Commons Logo" loading="lazy">
                        </a>
                        <p>
                            This work is licensed under a <a
                                href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons
                                Attribution-NonCommercial-ShareAlike 4.0 International License.</a>
                        </p>
                    </div>
                    <div class="col-md" id="contact">
                        <h5>Contact Us</h5>
                        <div>
                            <a href="{% url 'contact' %}">      
                                <svg xmlns="https://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
                                    <!-- draw the envelope icon -->
                                    <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"/>
                                </svg>
                                Contact
                            </a>
                        </div>
                        <div>
                            <a href="https://www.facebook.com/CantusDatabase" target="_blank">Cantus Database on Facebook</a>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-8" id="logos">
                        <div class="row">
                            <div class="col-md-6">
                                <a href="https://uwaterloo.ca/" target="_blank">
                                    <img
                                        class="img-fluid p-2"
                                        style="max-width: 100%;"
                                        src="{% static "uwaterloo-logo.png" %}"
                                        alt="University of Waterloo Logo"
                                        title="University of Waterloo"
                                        loading="lazy">
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a href="https://www.dal.ca/faculty/arts/school-of-performing-arts.html" target="_blank">
                                    <img
                                        class="img-fluid p-2"
                                        style="max-width: 100%;"
                                        src="{% static "dalhousie-logo.png" %}"
                                        alt="Dalhousie University Logo"
                                        title="Dalhousie University"
                                        loading="lazy">
                                </a>
                            </div>
                        </div>
                        <a href="https://www.sshrc-crsh.gc.ca" target="_blank">
                            <img
                                class="img-fluid p-2"
                                style="max-width: 100%;"
                                src="{% static "sshrc-logo.jpg" %}"
                                alt="Social Sciences and Humanities Research Council Logo"
                                title="Social Sciences and Humanities Research Council of Canada"
                                loading="lazy">
                        </a>
                        <a href="https://alliancecan.ca/" target="_blank">
                            <img
                                class="img-fluid p-2"
                                style="max-width: 100%;"
                                src="{% static "digital-alliance-logo.png" %}"
                                alt="Digital Research Alliance Logo"
                                title="Digital Research Alliance"
                                loading="lazy">
                        </a>
                        <div class="col-md-6">
                            <a href="https://uwaterloo.ca/margot/" target="_blank">
                                <img class="img-fluid p-2"
                                    src="{% static "margot-logo.png" %}"
                                    alt="MARGOT Logo"
                                    title="MARGOT"
                                    loading="lazy">
                            </a>
                        </div>
                    </div>
                    <div class="col-md-4" id="login">
                        {% if not request.user.is_anonymous %}
                            {% if request.user|has_group:"contributor" or request.user|has_group:"editor" or request.user|has_group:"project manager" %}
                                <h5>Admin Navigation</h5>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item p-0">
                                        <a href="{% url 'my-sources' %}">My Sources</a>
                                    </li>
                                    <li class="list-group-item p-0">
                                        <a href="{% url 'source-create' %}">Add Source</a>
                                    </li>
                                    {% if request.user|has_group:"project manager" %}
                                        <li class="list-group-item p-0">
                                            <a href="{% url 'admin:articles_article_add' %}">Add News</a>
                                        </li>
                                        <li class="list-group-item p-0">
                                            <a href="{% url 'admin:main_app_feast_add' %}">Add Feast</a>
                                        </li>
                                        <li class="list-group-item p-0">
                                            <a href="{% url 'indexer-list' %}">List of Indexers</a>
                                        </li>
                                        <li class="list-group-item p-0">
                                            <a href="{% url 'admin:users_user_changelist' %}">Administer Users</a>
                                        </li>
                                        <li class="list-group-item p-0">
                                            <a href="{% url 'admin:index' %}">Taxonomy Manager</a>
                                        </li>
                                        <li class="list-group-item p-0">
                                            <a href="{% url 'content-overview' %}">Content Overview</a>
                                        </li>
                                    {% endif %}
                                </ul>
                            {% endif %}
                            <h5>User Profile</h5>
                            <a href="{% url 'user-detail' request.user.id %}">{{ request.user }}</a>
                            |
                            <a href="{% url 'change-password' %}">Change Password</a>
                            |
                            <a href="{% url 'logout' %}">Log out</a>
                        {% else %}
                            <h5>Login for Contributors</h5>
                            <a href="{% url 'login' %}?next={{ request.path }}">
                                <button type="button" class="btn btn-dark">Log in</button>
                            </a>                        
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12" style="background-color: #CC3333;">
            {% if PROJECT_ENVIRONMENT == "DEVELOPMENT" %}
                <span title="Project Environment: Development">DEVELOPMENT</span>
            {% endif %}
            {% if PROJECT_ENVIRONMENT == "STAGING" %}
                <span title="Project Environment: Staging">STAGING</span>
            {% endif %}
            <a href="https://www.facebook.com/CantusDatabase">
                <img src="{% static "facebookIcon.png" %}" alt="Facebook link" loading="lazy">
            </a>
            <a href="mailto:debra.lacoste@dal.ca">
                <img src="{% static "sendMailIcon.png" %}" alt="Send us email" loading="lazy">
            </a>
            <small style="float: right">Cantus Database © 2012-2023</small>
        </div>
    </footer>
</body>

</html>
